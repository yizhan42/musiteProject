<?phpfunction executeAndReturnFormatedObject($seq, $modelFile, $dirBackend) {	$output = execute($seq, $modelFile, $dirBackend);	return formatObject($output);}function execute($seq, $modelFile, $dirBackend) {	$cwd = getcwd();	chdir($dirBackend);		$tmpfname = tempnam('tmp', "musite.");	$handle = fopen($tmpfname, "w");	fwrite($handle, $seq);	fclose($handle);		//$command = "java -jar Musite.jar predict -i $tmpfname -o $tmpfname.out -f model/".selectModel($org);	$command = "/usr/bin/java -jar $cwd/$dirBackend/Musite.jar predict -i $tmpfname -o $tmpfname.out -f $cwd/$dirBackend/model/$modelFile";	//$command = './Musite-listmodel.sh';		$execOutput;	$returnCode;	exec($command, $execOutput, $returnCode);		// format	//$ret = formatdata("$tmpfname.out");	$ret = file("$tmpfname.out");		//print $command.'<br /><br />';	//print_r($execOutput); print '<br />';	//print $returnCode.'<br />';	//print 'return: ';print_r($ret);		//unlink($tmpfname);	//unlink("$tmpfname.out");	//chmod($tmpfname,0777);	//chmod("$tmpfname.out",0777);		chdir($cwd);		return $ret;}function formatObject($lines) {	//$lines = file($outputFile);	$len = count($lines);	$sites = array( );	for($i=1; $i<$len; $i++) {		$line = $lines[$i];		if (strpos($line,'>')===0) {			if (!empty($sites)) {				$data[] = '{"data":['.implode(',',$sites).'],"header":"'.$header.'"}';				$sites = array( );			}			$header = $line;		} else {			$strs = explode("\t",$line);			$specificity = sprintf("%.2f%%",floatval($strs[4])*100);			$score = sprintf("%.2f",floatval($strs[3]));			$sites[] = '{"position":"'.$strs[0].'","sequence":"'.$strs[1].'","specificity":"'.$specificity.'","score":"'.$score.'","aminoAcid":"'.$strs[2].'"}';		}	}		$data[] = '{"data":['.implode(',',$sites).'],"header":"'.$header.'"}';		return '{"proteins":['.implode(',',$data).']}';}?>